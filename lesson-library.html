<!DOCTYPE html>
<html lang="en" class="">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Dashboard - Golden Fellows English</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Source+Serif+Pro:ital,wght@0,400;0,600;0,700;1,400&display=swap" rel="stylesheet">

    <script>
        // Theme loader script
        if (localStorage.getItem('theme') === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark');
        } else {
            document.documentElement.classList.remove('dark');
        }
    </script>
    
    <style>
        body { 
            font-family: 'Source Serif Pro', serif;
            background-color: #F7F5F2; /* Warm off-white */
            background-image: url('data:image/svg+xml,%3Csvg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg"%3E%3Cg fill="none" fill-rule="evenodd"%3E%3Cg fill="%23DCD9D4" fill-opacity="0.4"%3E%3Cpath d="M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z"/%3E%3C/g%3E%3C/g%3E%3C/svg%3E');
        }
        .dark body {
            background-color: #1a202c;
            background-image: url('data:image/svg+xml,%3Csvg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg"%3E%3Cg fill="none" fill-rule="evenodd"%3E%3Cg fill="%232D3748" fill-opacity="0.4"%3E%3Cpath d="M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z"/%3E%3C/g%3E%3C/g%3E%3C/svg%3E');
        }
        .font-brand { font-family: 'Source Serif Pro', serif; }
        .lesson-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .lesson-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
    </style>
</head>
<body class="text-gray-800 dark:text-gray-200 antialiased">

    <header class="bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm shadow-sm border-b border-stone-200 dark:border-gray-700 sticky top-0 z-40">
        <div class="container mx-auto px-4 sm:px-6 md:px-8 py-4 flex justify-between items-center">
            <a href="#" class="text-xl font-bold font-brand text-gray-900 dark:text-white">Golden Fellows English</a>
            </div>
    </header>

    <main class="container mx-auto p-4 sm:p-6 md:p-8 max-w-7xl font-brand">
        <header class="mb-12">
            <h1 class="text-4xl md:text-5xl font-bold text-gray-900 dark:text-white">Welcome back!</h1>
            <p class="text-gray-600 dark:text-gray-400 mt-3 text-lg">Let's continue your journey to fluency.</p>
        </header>

        <section id="continue-learning-section" class="mb-12">
            <h2 class="text-2xl font-semibold text-gray-800 dark:text-gray-200 mb-4">Pick Up Where You Left Off</h2>
            <div id="continue-learning-card" class="bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg border border-stone-200 dark:border-gray-700 flex items-center justify-between hover:border-indigo-500 dark:hover:border-indigo-500 transition-colors duration-300">
                </div>
        </section>

        <div class="flex flex-col lg:flex-row gap-8">
            <aside class="w-full lg:w-1/4">
                <div class="sticky top-24">
                    <h3 class="text-xl font-semibold text-gray-800 dark:text-gray-200 mb-4">Discover Lessons</h3>
                    <div id="filters" class="space-y-6">
                        <div>
                            <label class="font-bold">Level</label>
                            <div id="level-filter" class="flex flex-wrap gap-2 mt-2">
                                </div>
                        </div>
                        <div>
                            <label class="font-bold">Topic</label>
                            <div id="topic-filter" class="flex flex-wrap gap-2 mt-2">
                                 </div>
                        </div>
                        <input id="search-input" type="text" placeholder="Search by keyword..." class="w-full p-2 border border-stone-300 dark:border-gray-600 rounded-md bg-transparent focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                    </div>
                </div>
            </aside>

            <div id="lessons-grid" class="w-full lg:w-3/4 grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-8">
                </div>
        </div>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            const lessons = [
                // Tags: [Level, Topic] - expanded for filtering
                { title: "How Are You Feeling?", level: "A1", topic: "Health & Medicine", status: 'completed', progress: 100, url: "#" },
                { title: "My Workout Routine", level: "A1", topic: "Working Out", status: 'in-progress', progress: 60, url: "#" },
                { title: "What Are You Reading?", level: "A2", topic: "Reading", status: 'not-started', progress: 0, url: "#" },
                { title: "Improving My Fitness", level: "A2", topic: "Working Out", status: 'not-started', progress: 0, url: "#" },
                { title: "Optimizing Your Workout", level: "B1", topic: "Working Out", status: 'not-started', progress: 0, url: "#" },
                { title: "Advanced Fitness Strategy", level: "B2", topic: "Working Out", status: 'not-started', progress: 0, url: "#" },
                { title: "Daily Routines", level: "A1", topic: "Hobbies", status: 'completed', progress: 100, url: "#" },
                { title: "Describing Measurements", level: "A2", topic: "Measurements", status: 'not-started', progress: 0, url: "#" },
            ];

            const lessonsGrid = document.getElementById('lessons-grid');
            const levelFilterContainer = document.getElementById('level-filter');
            const topicFilterContainer = document.getElementById('topic-filter');
            const searchInput = document.getElementById('search-input');
            const continueLearningCard = document.getElementById('continue-learning-card');

            // --- 1. Populate Dynamic "Continue Learning" Card ---
            const lastInProgress = lessons.find(l => l.status === 'in-progress');
            if (lastInProgress) {
                continueLearningCard.innerHTML = `
                    <div>
                        <span class="text-xs font-bold px-2 py-0.5 rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300">${lastInProgress.level}</span>
                        <h3 class="text-lg font-semibold text-gray-900 dark:text-white mt-2">${lastInProgress.title}</h3>
                        <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5 mt-2">
                          <div class="bg-indigo-600 h-2.5 rounded-full" style="width: ${lastInProgress.progress}%"></div>
                        </div>
                    </div>
                    <a href="${lastInProgress.url}" class="bg-indigo-600 text-white font-semibold px-4 py-2 rounded-lg whitespace-nowrap hover:bg-indigo-700">Continue</a>
                `;
            } else {
                 document.getElementById('continue-learning-section').style.display = 'none';
            }
            
            // --- 2. Populate Filters ---
            const levels = [...new Set(lessons.map(l => l.level))].sort();
            const topics = [...new Set(lessons.map(l => l.topic))].sort();
            
            levelFilterContainer.innerHTML = '<button class="filter-btn level-btn active" data-filter="all">All</button>' + levels.map(l => `<button class="filter-btn level-btn" data-filter="${l}">${l}</button>`).join('');
            topicFilterContainer.innerHTML = '<button class="filter-btn topic-btn active" data-filter="all">All</button>' + topics.map(t => `<button class="filter-btn topic-btn" data-filter="${t}">${t}</button>`).join('');

            // --- 3. Render Lessons Function ---
            function renderLessons() {
                const activeLevel = document.querySelector('.level-btn.active').dataset.filter;
                const activeTopic = document.querySelector('.topic-btn.active').dataset.filter;
                const searchTerm = searchInput.value.toLowerCase();

                const filteredLessons = lessons.filter(lesson => {
                    const levelMatch = activeLevel === 'all' || lesson.level === activeLevel;
                    const topicMatch = activeTopic === 'all' || lesson.topic === activeTopic;
                    const searchMatch = lesson.title.toLowerCase().includes(searchTerm);
                    return levelMatch && topicMatch && searchMatch;
                });
                
                lessonsGrid.innerHTML = '';
                if (filteredLessons.length === 0) {
                    lessonsGrid.innerHTML = `<p class="col-span-full text-center text-gray-500 dark:text-gray-400">No lessons match your filters.</p>`;
                    return;
                }

                filteredLessons.forEach(lesson => {
                    const card = document.createElement('a');
                    card.href = lesson.url;
                    
                    let cardClasses = 'lesson-card block bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg border border-stone-200 dark:border-gray-700';
                    let statusIcon = '';
                    let progressBar = '';
                    
                    if(lesson.status === 'completed') {
                        cardClasses += ' opacity-60'; // Visually distinguish completed lessons
                        statusIcon = `<svg class="h-6 w-6 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>`;
                    }
                    if(lesson.status === 'in-progress') {
                        progressBar = `
                        <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 mt-3">
                          <div class="bg-indigo-600 h-1.5 rounded-full" style="width: ${lesson.progress}%"></div>
                        </div>`;
                    }

                    card.className = cardClasses;

                    card.innerHTML = `
                        <div class="flex justify-between items-start">
                            <span class="text-xs font-bold px-2 py-0.5 rounded-full bg-stone-100 text-stone-800 dark:bg-gray-900 dark:text-stone-300 border border-stone-200 dark:border-gray-700">${lesson.topic}</span>
                            ${statusIcon}
                        </div>
                        <h3 class="text-lg font-semibold text-gray-900 dark:text-white mt-4">${lesson.title}</h3>
                        ${progressBar}
                    `;
                    lessonsGrid.appendChild(card);
                });
            }
            
            // --- 4. Event Listeners ---
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    // Handle active state for its group
                    btn.parentElement.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    renderLessons();
                });
            });
            searchInput.addEventListener('input', renderLessons);

            // --- Initial Render ---
            renderLessons();
            
            // --- Helper Styles ---
            // This is a simple way to add styles for the active filter buttons without an external CSS file
            const style = document.createElement('style');
            style.innerHTML = `
                .filter-btn { padding: 4px 12px; border-radius: 9999px; font-size: 14px; font-weight: 600; background-color: #F5F5F4; color: #57534E; border: 1px solid #E7E5E4; }
                .dark .filter-btn { background-color: #374151; color: #D6D3D1; border-color: #4B5563; }
                .filter-btn.active { background-color: #4338CA; color: white; border-color: #4338CA; }
                .dark .filter-btn.active { background-color: #6366F1; color: white; border-color: #6366F1; }
            `;
            document.head.appendChild(style);
        });
    </script>
</body>
</html>
